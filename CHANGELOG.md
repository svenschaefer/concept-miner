# Changelog

All notable changes to this project are documented in this file.

## [Unreleased]

- v0.001 scaffold baseline integrated with template structure, scripts, and quality gates.
- v0.003 transition product API added: `extractConcepts` and `validateConcepts`.
- v0.004 product CLI commands added: `extract` and `validate-concepts` (compatibility commands retained).
- v0.004 contract guard tests added for OpenAPI/schema endpoint and field alignment.
- v0.005 realistic artifact corpus layout contract test added.
- v0.006 prototype benchmark/legacy policy checks enforced in `ci:check`.
- v0.007 frozen persisted-mode reference regression test added across realistic seeds.
- v0.008 README updated with current runnable API/CLI usage.
- v0.009 local `release:check` gate validated as green.
- v0.010-a frozen reference policy guard added (`check:frozen-references-policy`) with CI enforcement.
- v0.010-b OpenAPI alignment tightened:
  - `ExtractConceptsResponse` now requires `schema_version` + `concepts`
  - `input_id` minLength constraints aligned with JSON schema
- v0.015 compatibility `validate` command now prioritizes canonical concepts-schema validation, with legacy template-output fallback retained during transition.
- v0.016 sidecar contracts added:
  - `schema/concept-candidates-meta.schema.json`
  - `schema/concept-candidates-diagnostics.schema.json`
  - integration checks validate frozen sidecars for all seeds/modes.
- v0.017 prototype tooling execution contracts added:
  - independent benchmark checks for `13a` and `13b` execution paths
  - threshold sweep report generation contract
  - wikipedia-title-index coverage report generation contract.
- v0.018 README now includes concrete REST quick-start examples for:
  - `POST /v1/concepts/extract`
  - `POST /v1/concepts/validate`
  plus docs contract coverage to prevent regression.
- v0.019 documented Step12 upstream boundary in `docs/GUARANTEES.md`:
  - `elementary-assertions` ownership is explicit
  - in-scope vs out-of-scope behavior is now contract-tested in docs checks.
- v0.020 pre-1.0 tag strategy closed:
  - `docs/REPO_WORKFLOWS.md` documents `v0.x.y` annotated tag policy
  - clean `npm run release:check` verified before first annotated tag creation.
- v0.021 `TODO.md` truth-sync:
  - completed template/package/CLI/test/docs/CI checklist items marked done
  - remaining unchecked items narrowed to genuinely open engineering scope.
- v0.022 release workflow contract checks added:
  - validates tag/version consistency in `.github/workflows/release.yml`
  - validates npm tarball creation and artifact upload steps are present.
- v0.023 publish prerequisite and install-gate closure:
  - docs consistency checks enforce npm prerequisite guidance (`npm whoami`, `NPM_TOKEN`)
  - `npm ci` executed successfully and local quality gates re-verified.
- v0.024 post-productization documentation closure:
  - release notes published at `docs/releases/v0.10.0.md`
  - operational snapshot refreshed in `docs/STATUSQUO.md`
  - upstream backlog documented at `docs/STEP12_UPSTREAM_BACKLOG.md`.
- v0.025 operational/tooling closure:
  - optional PowerShell wrapper flows documented in `docs/OPERATIONAL.md`
  - integration contract added for `prototype/check-concept-candidates.js` execution.
- v0.026 generated report artifact governance:
  - checked-in snapshot policy documented in `docs/GENERATED_REPORT_ARTIFACTS_POLICY.md`
  - CI policy check added via `scripts/check-generated-report-artifacts-policy.js`.
- v0.027 prototype documentation migration:
  - contract/governance summary migrated into `docs/PROTOTYPE_MIGRATION_NOTES.md`
  - prototype TODO open/closed history mapped into product backlog context.
- v0.028 batch runner contract coverage:
  - added staged integration execution check for `prototype/run-seed-concept-candidates.ps1` in persisted mode.
- v0.029 TODO execution-order sync:
  - section-phase status now marks completed early phases (`Section 0`, `Sections 1-2`) explicitly.
- v0.030 prototype determinism/hard-failure coverage:
  - added hard-failure contract test for invalid `wiki_*_count` typing
  - added in-process and fresh-process replay determinism checks
  - added LF + single trailing newline serialization check for prototype CLI output.
- v0.031 contract docs synchronization:
  - added `docs/CONTRACT_ALIGNMENT.md` with canonical payload/no-envelope rule
  - synchronized `openapi/README.md` and `schema/README.md` with contract mapping
  - added contract-doc alignment checks in integration tests.
- v0.032 repository layout decision:
  - retained `prototype/` as in-repo historical/governance reference for current phase
  - documented in `docs/REPO_LAYOUT_DECISION.md`.
- v0.033 prototype test corpus entrypoint migration:
  - made `prototype/concept-candidates.test.js` runnable against productized `test/artifacts` layout
  - added integration contract test `test/integration/prototype-test-corpus-entrypoint.contract.test.js`
  - retained anti-regression and soft performance budget checks by executing the legacy corpus runner in CI gates.
- v0.034 concepts validation invariants:
  - `validateConcepts` now enforces duplicate concept-id rejection
  - `validateConcepts` now enforces duplicate concept-name rejection
  - `validateConcepts` now enforces occurrence bound validity (`end >= start`)
  - added unit contract tests for all three invariant classes.
- v0.035 concepts runtime modularization:
  - extracted fallback extraction helpers into `src/core/fallback-extraction.js`
  - extracted prototype bridge/mode mapping helpers into `src/core/prototype-bridge.js` and `src/core/mode.js`
  - extracted concept invariant checks into `src/validate/concepts-invariants.js`
  - simplified `src/concepts.js` to orchestration only.
- v0.036 CLI entrypoint contract hardening:
  - added `test/unit/cli-entrypoint.contract.test.js` to enforce thin `bin/cli.js` delegation
  - strengthened CLI usage contract test to keep compatibility commands (`run`, `validate`) visible.
- v0.037 compatibility alias contract closure:
  - added positive-path compatibility tests for `concept-miner run` and `concept-miner validate`
  - kept underscore and kebab-case mode compatibility contractually covered in CLI tests.
- v0.038 persisted candidate-schema migration:
  - added `schema/seed.concept-candidates.schema.json` as product-owned schema location
  - updated prototype generator/checker/tests to resolve the migrated schema first, with legacy fallback.
- v0.039 full golden artifact diff coverage:
  - added `test/integration/prototype-frozen-full-artifact.contract.test.js`
  - regenerates per-seed persisted artifacts and compares all frozen YAML/JSON outputs against `result-reference`
  - normalizes diagnostics `stats.phase_ms.*` timing values during comparison to avoid false drift from runtime timing variance.
- v0.040 core extraction invariant contracts:
  - added `test/integration/prototype-core-invariants.contract.test.js`
  - enforces canonicalization, deterministic concept-id derivation, role bucket non-negative integer counts, and wikipedia-title-index signal typing across realistic persisted Step12 seeds.
- v0.041 release smoke rehearsal closure:
  - added `scripts/release-smoke-rehearsal.js` and npm script `smoke:release:rehearsal`
  - executes prepublish and postpublish-style clean-workspace smoke installs against the local tarball
  - added script contract test `test/integration/release-smoke-rehearsal-script.contract.test.js`
  - updated `docs/NPM_RELEASE.md` with private-phase tarball-simulated postpublish flow and public-registry toggle.
- v0.042 determinism and ordering guard closure:
  - added `test/integration/prototype-repeat-determinism.contract.test.js`
  - enforces repeat-run deterministic persisted-step12 outputs across all realistic seeds and both modes
  - asserts byte-stable YAML/metadata and normalized diagnostics stability, plus object-level determinism validation.
- v0.043 runtime seed-path transition closure:
  - updated `prototype/generateForSeed` to support both legacy (`<seed>/seed/seed.txt`) and flattened (`<seed>/seed.txt`) artifact layouts
  - added `test/integration/runtime-seed-path.contract.test.js` to enforce product API runtime seed-path extraction in both product modes.
- v0.044 prototype split groundwork:
  - extracted canonicalization and concept-id utilities into `prototype/core/canonicalization.js`
  - wired `prototype/concept-candidates.js` to import extracted utilities with unchanged public behavior and exports.
- v0.045 prototype split groundwork:
  - extracted shared utility helpers into `prototype/core/shared-utils.js`
  - wired `prototype/concept-candidates.js` to import shared helpers with unchanged public behavior and contracts.
- v0.046 prototype split groundwork:
  - extracted alias/morphology helpers into `prototype/core/alias-morphology.js`
  - wired `prototype/concept-candidates.js` to import alias/morphology helpers with unchanged public behavior and contracts.
- v0.047 prototype split groundwork:
  - extracted options/policy helpers into `prototype/core/options-policy.js`
  - wired `prototype/concept-candidates.js` to import option/policy helpers with unchanged public behavior and contracts.
- v0.048 prototype split groundwork:
  - extracted Step12 contract/index helpers into `prototype/core/step12-contract.js`
  - wired `prototype/concept-candidates.js` to import Step12 contract/index helpers with unchanged public behavior and contracts.
- v0.049 prototype split groundwork:
  - extracted wikipedia-signal regex/constants/helpers into `prototype/core/wikipedia-signals.js`
  - wired `prototype/concept-candidates.js` to import wikipedia-signal helpers with unchanged public behavior and contracts.
- v0.050 prototype split groundwork:
  - extracted wikipedia-title-index mapping helpers into `prototype/core/wikipedia-mapping.js`
  - wired `prototype/concept-candidates.js` to import wikipedia mapping helpers with unchanged public behavior and contracts.
- v0.051 prototype split groundwork:
  - extracted mention selection helpers into `prototype/core/mention-selection.js`
  - wired `prototype/concept-candidates.js` to import mention selection helpers with unchanged public behavior and contracts.
- v0.052 prototype split groundwork:
  - extracted mention lifting helpers into `prototype/core/mention-lifting.js`
  - wired `prototype/concept-candidates.js` to import mention lifting helpers with unchanged public behavior and contracts.
- v0.053 prototype split groundwork:
  - extracted candidate accumulator helpers into `prototype/core/candidate-accumulator.js`
  - wired `prototype/concept-candidates.js` to import accumulator/merge helpers with unchanged public behavior and contracts.
- v0.054 prototype split groundwork:
  - extracted mode13b metrics and host-evaluation helpers into `prototype/core/mode13b-metrics.js`
  - wired `prototype/concept-candidates.js` to import mode13b metrics/containment helper functions with unchanged public behavior and contracts.
- v0.055 prototype split groundwork:
  - extracted mode13b stronger-host suppression/ranking helpers into `prototype/core/mode13b-host-selection.js`
  - wired `prototype/concept-candidates.js` to import mode13b host-selection helpers with unchanged public behavior and contracts.
- v0.056 prototype split groundwork:
  - extracted prune preparation/index helpers into `prototype/core/prune-preparation.js`
  - wired `prototype/concept-candidates.js` to import prune-state preparation helpers with unchanged public behavior and contracts.
- v0.057 prototype split groundwork:
  - extracted alias merge-target and canonical alias merge helpers into `prototype/core/alias-merge.js`
  - wired `prototype/concept-candidates.js` to import alias merge helpers while preserving legacy `abac` tripwire literal in-file.
- v0.058 prototype split groundwork:
  - extracted emission-phase candidate assembly and wikipedia-title-index evidence materialization helpers into `prototype/core/emission-assembly.js`
  - wired `prototype/concept-candidates.js` emission path to import helpers with unchanged output contracts.
- v0.059 prototype split groundwork:
  - extracted diagnostics/sidecar assembly helpers into `prototype/core/diagnostics-assembly.js`
  - wired `prototype/concept-candidates.js` diagnostics materialization path to import helpers with unchanged sidecar contract shape.
- v0.060 prototype split groundwork:
  - extracted persisted output writer/meta-sidecar helper logic into `prototype/core/output-writers.js`
  - wired `prototype/concept-candidates.js` CLI write path to import output writer helpers with unchanged persisted output and sidecar contracts.
- v0.061 prototype split groundwork:
  - extracted deterministic candidate validation helper cluster into `prototype/core/determinism-validation.js`
  - wired `prototype/concept-candidates.js` deterministic output validator loop to use the extracted helper with unchanged contract checks.
- v0.062 prototype split groundwork:
  - extracted runtime/persisted generation finalization helper logic into `prototype/core/generation-orchestration.js`
  - wired `prototype/concept-candidates.js` runtime and persisted generation paths to use shared finalization helper behavior.
- v0.063 prototype split groundwork:
  - extracted schema loading/validation and deterministic YAML serialization helpers into `prototype/core/schema-serialization-io.js`
  - wired `prototype/concept-candidates.js` generation paths to consume the extracted schema/serialization IO helpers.
- v0.064 prototype split groundwork:
  - extracted Step12 artifact input loading and runtime seed-path resolution helpers into `prototype/core/step12-input.js`
  - wired `prototype/concept-candidates.js` generation paths to consume Step12 input helper functions with unchanged path compatibility behavior.
- v0.065 prototype split groundwork:
  - extracted CLI option parsing and run-option assembly helpers into `prototype/core/cli-option-assembly.js`
  - wired `prototype/concept-candidates.js` main execution path to consume CLI option assembly helpers with unchanged CLI contract behavior.
- v0.066 prototype split groundwork:
  - extracted CLI usage text and input-source guard helpers into `prototype/core/cli-usage.js` and `prototype/core/cli-guards.js`
  - wired `prototype/concept-candidates.js` main execution usage/guard path to consume these helpers with unchanged CLI exit semantics.
- v0.067 prototype split groundwork:
  - extracted CLI output write/emit orchestration helper logic into `prototype/core/cli-write-emit.js`
  - wired `prototype/concept-candidates.js` main execution output path to consume the helper with unchanged persisted output behavior.
- v0.068 prototype split groundwork:
  - extracted high-level CLI main-flow orchestration helper logic into `prototype/core/cli-main-flow.js`
  - wired `prototype/concept-candidates.js` main execution path to delegate orchestration with unchanged CLI behavior and exit semantics.
- v0.069 prototype split groundwork:
  - extracted CLI runtime generation invocation helper logic into `prototype/core/cli-runtime-invocation.js`
  - wired `prototype/core/cli-main-flow.js` and `prototype/concept-candidates.js` to delegate runtime/persisted invocation branching with unchanged output behavior.
- v0.070 prototype split groundwork:
  - extracted CLI main-flow context assembly helper logic into `prototype/core/cli-context-assembly.js`
  - wired `prototype/concept-candidates.js` to build the high-level CLI flow context via helper delegation with unchanged behavior.
- v0.071 prototype split groundwork:
  - extracted CLI runtime invocation dependency-binding helper logic into `prototype/core/cli-runtime-binding.js`
  - wired `prototype/concept-candidates.js` to delegate invocation binding through helper composition with unchanged behavior.
- v0.072 prototype split groundwork:
  - extracted CLI flow dependency assembly helper logic into `prototype/core/cli-flow-dependencies.js`
  - wired `prototype/concept-candidates.js` to delegate `executeCliMainFlow` dependency wiring with unchanged behavior.
- v0.073 prototype split groundwork:
  - extracted CLI parse-context wrapper helper logic into `prototype/core/cli-parse-context.js`
  - wired `prototype/concept-candidates.js` to delegate CLI parse-context assembly with unchanged behavior.
- v0.074 prototype split groundwork:
  - extracted CLI main setup/orchestration helper logic into `prototype/core/cli-main-setup.js`
  - wired `prototype/concept-candidates.js` to delegate main setup composition with unchanged behavior.
- v0.075 prototype split groundwork:
  - extracted CLI parse-dependency assembly helper logic into `prototype/core/cli-parse-dependencies.js`
  - wired `prototype/concept-candidates.js` to delegate parse-dependency object assembly with unchanged behavior.
- v0.076 prototype split groundwork:
  - extracted CLI flow-context dependency assembly helper logic into `prototype/core/cli-flow-context-dependencies.js`
  - wired `prototype/concept-candidates.js` to delegate flow-context dependency assembly with unchanged behavior.
- v0.077 prototype split groundwork:
  - extracted CLI runtime-invocation dependency assembly helper logic into `prototype/core/cli-runtime-invocation-dependencies.js`
  - wired `prototype/concept-candidates.js` to delegate runtime-invocation dependency assembly with unchanged behavior.
- v0.078 prototype split groundwork:
  - extracted CLI flow-dependency assembly helper logic into `prototype/core/cli-flow-dependency-assembly.js`
  - wired `prototype/concept-candidates.js` to delegate flow-dependency assembly with unchanged behavior.
- v0.079 prototype split groundwork:
  - extracted CLI main-setup dependency-bundle helper logic into `prototype/core/cli-main-setup-dependencies.js`
  - wired `prototype/concept-candidates.js` to delegate main-setup dependency bundle assembly with unchanged behavior.
- v0.080 prototype split groundwork:
  - extracted CLI main-setup invocation helper logic into `prototype/core/cli-main-setup-invocation.js`
  - wired `prototype/concept-candidates.js` to delegate main-setup invocation with unchanged behavior.
- v0.081 prototype split groundwork:
  - extracted CLI main-setup pipeline helper logic into `prototype/core/cli-main-pipeline.js`
  - wired `prototype/concept-candidates.js` to delegate main setup pipeline assembly and invocation with unchanged behavior.
- v0.082 prototype split groundwork:
  - extracted CLI main pipeline input-assembly helper logic into `prototype/core/cli-main-pipeline-inputs.js`
  - wired `prototype/concept-candidates.js` to delegate pipeline input assembly with unchanged behavior.
- v0.083 prototype split groundwork:
  - extracted CLI main pipeline dependency-bundle helper logic into `prototype/core/cli-main-pipeline-dependencies.js`
  - wired `prototype/concept-candidates.js` to delegate pipeline dependency assembly with unchanged behavior.
- v0.084 prototype split groundwork:
  - extracted CLI usage-exit handling helper logic into `prototype/core/cli-usage-exit.js`
  - wired `prototype/concept-candidates.js` to delegate usage exit handling with unchanged behavior.
- v0.085 prototype split groundwork:
  - extracted CLI error-exit handling helper logic into `prototype/core/cli-error-exit.js`
  - wired `prototype/concept-candidates.js` to delegate error exit handling with unchanged behavior.
- v0.086 prototype split groundwork:
  - extracted CLI main execution helper logic into `prototype/core/cli-main-execution.js`
  - wired `prototype/concept-candidates.js` to delegate main execution orchestration with unchanged behavior.
- v0.087 prototype split groundwork:
  - extracted CLI main dependency-source assembly helper logic into `prototype/core/cli-main-dependency-sources.js`
  - wired `prototype/concept-candidates.js` to delegate main dependency-source assembly with unchanged behavior.
- v0.088 prototype split groundwork:
  - extracted CLI main invocation-wrapper helper logic into `prototype/core/cli-main-invocation.js`
  - wired `prototype/concept-candidates.js` to delegate main invocation wrapping with unchanged behavior.
- v0.089 prototype split groundwork:
  - extracted CLI main catch-handler helper logic into `prototype/core/cli-main-catch-handler.js`
  - wired `prototype/concept-candidates.js` to delegate catch-path error-exit handling with unchanged behavior.
- v0.090 prototype split groundwork:
  - extracted CLI main entrypoint-wrapper helper logic into `prototype/core/cli-entrypoint.js`
  - wired `prototype/concept-candidates.js` to delegate `require.main === module` entrypoint handling with unchanged behavior.
- v0.091 prototype split groundwork:
  - extracted CLI main function export helper logic into `prototype/core/cli-main-export.js`
  - wired `prototype/concept-candidates.js` to delegate exported API object assembly with unchanged behavior.
